<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å½±è¦–è³‡æºæœå°‹</title>
    <link rel="icon" href="favicon.ico">
    <link rel="stylesheet" href="/style.css">
</head>
<body>
<p style="margin-bottom:12px;"></p>
<div class="container">
    <div class="searchbar">
        <input type="text" id="searchMsg" placeholder="Enter your search query">
        <button id="btn">Search</button>
    </div>
<p style="margin-bottom:17px;"></p>
    <div class="link-columns">
        <div class="column column-1">
            <h3>è³‡æºç¶² ğŸ”:</h3>
            <div class="loader-container" id="loader" style="display: none;">
                <div class="loader"></div>
                <div class="status-text" id="status">Searching...</div>
            </div>			
            <ul id="resourceList"></ul>
        </div>
        <div class="column column-2">
            <h3>è³‡æºç¶² URL ğŸŒ:</h3>
            <ul id="resourceURLList"></ul>
        </div>
        <div class="column column-3">
            <h3>Websitez ğŸ”:</h3>
            <ul id="websiteList"></ul>
        </div>
        <div class="column column-4">
            <h3>Websitez URL ğŸŒ:</h3>
            <ul id="websiteURLList"></ul>
        </div>		
        <div class="column column-5">
            <h3>è³‡æºç¶² <img src="https://cdn3.emoji.gg/emojis/6465-captcha.png" width="25px" height="25px">:</h3>
            <ul id="captchaList"></ul>
            <p style="margin-bottom:8px;"></p>
            <h3>è³‡æºç¶² URL ğŸŒ:</h3>
            <ul id="captchaURLList"></ul>
        </div>
        <div class=" column-6">
            <h3>ENGLISH ğŸ”:</h3>
            <ul id="englishList"></ul>
            <br><br><br><br><br>
            <h3>Subtitle ğŸ”:</h3>
            <ul id="subtitleList"></ul>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/opencc-js@1.0.5/dist/umd/t2cn.js"></script>
<script>
    const websiteOrder = ["ğŸ” å¦‚æ„", "ğŸ” è±†ç“£", "ğŸ” è‡¥é¾", "ğŸ” é­”çˆª", "ğŸ” ç´…ç‰›", 
                         "ğŸ” è±ªè¯", "ğŸ” å…‰é€Ÿ", "ğŸ” é‡‘é·¹", "ğŸ” é€Ÿæ’­", "ğŸ” è™ç‰™", 
                         "ğŸ” æ¥µé€Ÿ", "ğŸ” é»‘æœ¨è€³"];

    // Configuration data (keep your existing data)
    const resourceList = document.getElementById("resourceList");
    const resourceURLList = document.getElementById("resourceURLList");
    const websiteList = document.getElementById("websiteList");
    const websiteURLList = document.getElementById("websiteURLList");	
    const captchaList = document.getElementById("captchaList");
    const captchaURLList = document.getElementById("captchaURLList");
    const englishList = document.getElementById("englishList");
    const subtitleList = document.getElementById("subtitleList");
    const btn = document.getElementById("btn");
    const loader = document.getElementById("loader");
    const percentageElement = document.getElementById("percentage");	

    let currentSearch = null;
    let isSearching = false;

    const isProduction = window.location.hostname !== 'localhost';
    const baseURL = isProduction 
        ? 'https://ninemui-github-io.onrender.com' 
        : 'http://localhost:5000';

    const resourceURL = [
		{ name: "ğŸŒå¦‚æ„è³‡æº", url: "https://www.ryzyw.com/index.php/vod/type/id/13.html" },
        { name: "ğŸŒè±†ç“£è³‡æº", url: "https://www.dbzy.com/vodtype/13.html?ac=detail" },
        { name: "ğŸŒè‡¥é¾è³‡æº", url: "https://wolongzyw.tv/index.php/vod/type/id/12.html" },
        { name: "ğŸŒé­”çˆªè³‡æº", url: "https://mzzy.me/index.php/vod/type/id/26.html" },
        { name: "ğŸŒç´…ç‰›è³‡æº", url: "https://hongniuzy.com/index.php/vod/type/id/sCCCCS.html?ac=detail" },
        { name: "ğŸŒè±ªè¯è³‡æº", url: "https://hhzyapi.com/index.php/vod/type/id/20.html?ac=detail" },
        { name: "ğŸŒå…‰é€Ÿè³‡æº", url: "https://guangsuzy.net/index.php/vod/type/id/13.html" },
        { name: "ğŸŒé‡‘é·¹è³‡æº", url: "https://jyzyapi.com/index.php/vod/type/id/20.html?ac=detail" },
        { name: "ğŸŒé€Ÿæ’­è³‡æº", url: "https://www.subozy.com/index.php/vod/type/id/14.html?ac=detail" },
        { name: "ğŸŒè™ç‰™è³‡æº", url: "https://huyazy.com/index.php/vod/type/id/20.html?ac=detail" },
        { name: "ğŸŒæ¥µé€Ÿè³‡æº", url: "https://www.jisuzy.com/index.php/vod/type/id/20.html?ac=detail" },
        { name: "ğŸŒé»‘æœ¨è€³è³‡æº", url: "https://www.heimuer.tv/index.php/vod/type/id/13.html" }
    ];
	
    const websites = [
		{ name: "ğŸ” å½±è¦–ç‹—", url: "https://www.yingshi.dog/vodsearch.html?wd=" },
        { name: "ğŸ” å¦‚æ„å½±è¦–", url: "https://rytv.tv/index.php/vod/search.html?wd=" },
        { name: "ğŸ” çœ‹ç‰‡ç‹‚äºº", url: "https://www.kpkuang.org/vodsearch/-------------.html?wd=" },
        { name: "ğŸ” ç¨æ’­åº«", url: "https://w.duboku.io/vodsearch/-------------.html?wd=" },
        { name: "ğŸ” æ­æ¨‚å½±é™¢", url: "https://www.olevod.tv/search?q=" },
        { name: "ğŸ” UBå½±è¦–", url: "https://www.ub1818.com/fil.html?keyword=" },
        { name: "ğŸ” å³çœ‹å½±è¦–", url: "https://www.jktv.app/search/-------------.html?wd=" },
        { name: "ğŸ” è€ç‹é›»å½±", url: "https://laowang.co/s.html?wd=" },
        { name: "ğŸ” ç¶²é£›è²“", url: "https://www.ncat3.com:51111/search?os=pc&k=" },
        { name: "ğŸ” æ³¥è¦–é »", url: "https://www.nivod.vip/s/-------------/?wd=" },
        { name: "ğŸ” è›‹è›‹é­”æ³•", url: "https://ddmf.net/vodsearch/-------------.html?wd=" },
        { name: "ğŸ” å”äººè¡—å½±è¦–", url: "https://www.chinatownfilm.com/vodsearch/-------------.html?wd=" },
        { name: "ğŸ” å°å¯¶å½±é™¢", url: "https://xiaoxintv.cc/index.php/vod/search.html?wd=" },
        { name: "ğŸ” é…·ç‰‡ç¶²", url: "https://kupian.org/search/--/?wd=" },
        { name: "ğŸ” Gimy", url: "https://gimy.tv/search/-------------.html?wd=" },
        { name: "ğŸ” éº¥ç”°å½±è¦–", url: "https://www.mtyy1.com/vodsearch/-------------.html?wd=" },
        { name: "ğŸ” æ„›ä½ çŸ­åŠ‡", url: "https://www.ainidj.com/vodsearch/-------------.html?wd=" }
    ];

    const websiteURL = [
		{ name: "ğŸŒå½±è¦–ç‹—", url: "https://www.yingshi.dog/vodshow/area/ä¸­å›½/id/juji/year/2025.html" },
        { name: "ğŸŒå¦‚æ„å½±è¦–", url: "https://rytv.tv/index.php/vod/show/id/13.html" },
        { name: "ğŸŒçœ‹ç‰‡ç‹‚äºº", url: "https://www.kpkuang.org/vodshow/13-------------.html" },
        { name: "ğŸŒç¨æ’­åº«", url: "https://w.duboku.io/vodshow/13-----------.html" },
        { name: "ğŸŒæ­æ¨‚å½±é™¢", url: "https://www.olevod.tv/nav/è¿ç»­å‰§/å…¨éƒ¨åœ°åŒº/å…¨éƒ¨å¹´ä»½/å›½äº§å‰§/å…¨éƒ¨/å…¨éƒ¨/æœ€æ–°.html" },
        { name: "ğŸŒUBå½±è¦–", url: "https://www.ub1818.com/fil.html?parent_category_id=101&category_id=123" },
        { name: "ğŸŒå³çœ‹å½±è¦–", url: "https://www.jktv.app/show/13-----------.html" },
        { name: "ğŸŒè€ç‹é›»å½±", url: "https://laowang.co/vs/2----å›½è¯­-------2025.html" },
        { name: "ğŸŒç¶²é£›è²“", url: "https://www.ncat3.com:51111/show/2-----3-1.html" },
        { name: "ğŸŒæ³¥è¦–é »", url: "https://www.nivod.vip/k/13-----------/" },
        { name: "ğŸŒè›‹è›‹é­”æ³•", url: "https://ddmf.net/vodshow/13-----------.html" },
        { name: "ğŸŒå”äººè¡—å½±è¦–", url: "https://www.chinatownfilm.com/vodshow/13-----------.html" },
        { name: "ğŸŒå°å¯¶å½±é™¢", url: "https://xiaoxintv.cc/index.php/vod/show/id/41.html" },
        { name: "ğŸŒé…·ç‰‡ç¶²", url: "https://kupian.org/show/guochanju/" },
        { name: "ğŸŒGimy", url: "https://gimy.tv/genre/13---.html" },
        { name: "ğŸŒéº¥ç”°å½±è¦–", url: "https://www.mtyy1.com/vodshow/1---å›½äº§å‰§--------.html" },
        { name: "ğŸŒæ„›ä½ çŸ­åŠ‡", url: "https://www.ainidj.com" }
    ];

    const captchaResources = [
		{ name: "ğŸ” ç´¢å°¼è³‡æº", url: "https://suonizy.net/index.php/vod/search/?wd=" },
        { name: "ğŸ” é­”éƒ½è³‡æº", url: "https://moduzy.com/search/-------------/?wd=" },	
        { name: "ğŸ” è¯ç‚ºå§è³‡æº", url: "https://huawei8.live/index.php/vod/search.html?wd={}" },		
        { name: "ğŸ” æœ€å¤§è³‡æº", url: "https://zuidazy.me/vodsearch/-------------.html?wd=" },
        { name: "ğŸ” æš´é¢¨è³‡æº", url: "https://bfzy.tv/s/?keys=+" },
        { name: "ğŸ” ç„¡ç›¡è³‡æº", url: "https://www.wujinzy.com/vodsearch/-------------.html?wd=" },
        { name: "ğŸ” æ–°æµªè³‡æº", url: "https://www.xinlangzy.com/index.php/vod/search.html?wd=" },
        { name: "ğŸ” OKè³‡æº", url: "https://okzyw1.com/vodsearch/-------------/?wd=" },
        { name: "ğŸ” ä¸«ä¸«è³‡æº", url: "https://cj2.yayazy.net/index.php/vod/search.html?wd=" }
    ];
	
    const captchaURL = [
        { name: "ğŸŒç´¢å°¼è³‡æº", url: "https://suonizy.net/index.php/vod/type/id/13/" },
        { name: "ğŸŒé­”éƒ½è³‡æº", url: "https://moduzy.com/list26/" },
        { name: "ğŸŒè¯ç‚ºå§è³‡æº", url: "https://huawei8.live/index.php/vod/type/id/72.html" },	
        { name: "ğŸŒæœ€å¤§è³‡æº", url: "https://zuidazy.me/vodtype/13.html" },
        { name: "ğŸŒæš´é¢¨è³‡æº", url: "https://bfzy.tv/index.php/vod/type/id/31.html" },
        { name: "ğŸŒç„¡ç›¡è³‡æº", url: "https://www.wujinzy.com/vodtype/13.html" },
        { name: "ğŸŒæ–°æµªè³‡æº", url: "https://www.xinlangzy.com/index.php/vod/type/id/13.html" },
        { name: "ğŸŒOKè³‡æº", url: "https://okzyw1.com/vodshow/13-----------/100" },
        { name: "ğŸŒä¸«ä¸«è³‡æº", url: "https://cj2.yayazy.net/index.php/vod/type/id/13.html" }
    ];

    const englishResources = [
        { name: "ğŸ” Soap2Day", url: "https://ww25.soap2day.day/?s=" },
        { name: "ğŸ” Fmovies", url: "https://fmovies.ps/search/" },
        { name: "ğŸ” SFlix", url: "https://sflix.to/search/" },
        { name: "ğŸ” 1HD", url: "https://www.google.ca/search?q=1hd.to+" }
    ];

    const subtitleResources = [
        { name: "ğŸ” Addic7ed", url: "https://www.google.ca/search?q=addic7ed.com+" },
        { name: "ğŸ” OpenSubtitle", url: "https://www.opensubtitles.org/en/search2/moviename-" },
        { name: "ğŸ” My Subs", url: "https://my-subs.co/search.php?key=" }
    ];
	

    async function convertToSimplified(query) {
        try {
            const converter = OpenCC.Converter({ from: 'tw', to: 'cn' });
            return await converter(query);
        } catch {
            return query;
        }
    }

    function clearResults() {
        document.querySelectorAll('#resourceList, #websiteList, #resourceURLList, #websiteURLList, #captchaList, #captchaURLList, #englishList, #subtitleList')
            .forEach(el => el.innerHTML = '');
    }

    async function performSearch() {
        if (isSearching) {
            currentSearch.close();
            document.getElementById('status').textContent = 'å·²å–æ¶ˆç•¶å‰æœå°‹';
        }

        const query = document.getElementById('searchMsg').value.trim();
        if (!query) return alert('è«‹è¼¸å…¥æœå°‹å…§å®¹');

        try {
            isSearching = true;
            clearResults();
            document.getElementById('loader').style.display = 'flex';

            const simplifiedQuery = await convertToSimplified(query);

            // Populate static websites
            websiteList.innerHTML = "";
            websites.forEach(resource => {
                const li = document.createElement("li");
                const a = document.createElement("a");
                a.className = "common-link";
                a.href = resource.url + encodeURIComponent(simplifiedQuery);
                a.target = "_blank";
                a.textContent = resource.name;
                li.appendChild(a);
                websiteList.appendChild(li);
            });

            // Populate websiteURL
            websiteURLList.innerHTML = "";
            websiteURL.forEach(resource => {
                const li = document.createElement("li");
                const a = document.createElement("a");
                a.className = "common-link";
                a.href = resource.url;
                a.target = "_blank";
                a.textContent = resource.name;
                li.appendChild(a);
                websiteURLList.appendChild(li);
            });

            // Populate CAPTCHA resources
            captchaList.innerHTML = "";
            captchaResources.forEach(resource => {
                const li = document.createElement("li");
                const a = document.createElement("a");
                a.className = "common-link";
                a.href = resource.url + encodeURIComponent(simplifiedQuery);
                a.target = "_blank";
                a.textContent = resource.name;
                li.appendChild(a);
                captchaList.appendChild(li);
            });

            // Populate CAPTCHA URL
            captchaURLList.innerHTML = "";
            captchaURL.forEach(resource => {
                const li = document.createElement("li");
                const a = document.createElement("a");
                a.className = "common-link";
                a.href = resource.url;
                a.target = "_blank";
                a.textContent = resource.name;
                li.appendChild(a);
                captchaURLList.appendChild(li);
            });

            // Populate English resources
            englishList.innerHTML = "";
            englishResources.forEach(resource => {
                const li = document.createElement("li");
                const a = document.createElement("a");
                a.className = "common-link";

                let modifiedQuery = simplifiedQuery;
                if (resource.name === "Fmovies" || resource.name === "SFlix") {
                    modifiedQuery = simplifiedQuery.replace(/\s+/g, '-');
                }

                a.href = resource.url + encodeURIComponent(modifiedQuery);
                a.target = "_blank";
                a.textContent = resource.name;
                li.appendChild(a);
                englishList.appendChild(li);
            });

            // Populate Subtitle resources
            subtitleList.innerHTML = "";
            subtitleResources.forEach(resource => {
                const li = document.createElement("li");
                const a = document.createElement("a");
                a.className = "common-link";
                a.href = resource.url + encodeURIComponent(simplifiedQuery);
                a.target = "_blank";
                a.textContent = resource.name;
                li.appendChild(a);
                subtitleList.appendChild(li);
            });

            // Populate resourceURL
            resourceURLList.innerHTML = "";
            resourceURL.forEach(resource => {
                const li = document.createElement("li");
                const a = document.createElement("a");
                a.className = "common-link";
                a.href = resource.url;
                a.target = "_blank";
                a.textContent = resource.name;
                li.appendChild(a);
                resourceURLList.appendChild(li);
            });

            // Start streaming dynamic results
            currentSearch = new EventSource(`${baseURL}/search?query=${encodeURIComponent(simplifiedQuery)}`);

            const results = {};
            let completed = 0;

            currentSearch.onmessage = (event) => {
                const data = JSON.parse(event.data);
                const [website, links] = Object.entries(data)[0];
                
                results[website] = links;
                completed++;
                
                updateProgress(completed);
                renderResults(results);
            };

            currentSearch.onerror = () => {
                isSearching = false;
                document.getElementById('loader').style.display = 'none';
                document.getElementById('status').textContent = 'æœå°‹å®Œæˆ';
                currentSearch.close();
            };

        } catch (error) {
            console.error('æœå°‹å¤±æ•—:', error);
            isSearching = false;
            document.getElementById('loader').style.display = 'none';
            document.getElementById('status').textContent = 'æœå°‹å¤±æ•—ï¼Œè«‹é‡è©¦';
        }
    }

    function updateProgress(completed) {
        const progress = Math.round((completed / websiteOrder.length) * 100);
        document.getElementById('status').textContent = 
            `æœå°‹ä¸­... (${completed}/${websiteOrder.length}) ${progress}%`;
    }

    function renderResults(results) {
        const listElement = document.getElementById('resourceList');
        listElement.innerHTML = '';
        
        websiteOrder.forEach(website => {
            const links = results[website] || [];
            const linkItems = [];

            if (links.length > 0) {
                links.forEach((link, index) => {
                    const linkElement = document.createElement('a');
                    linkElement.className = 'common-link';
                    linkElement.href = link;
                    linkElement.target = '_blank';
                    linkElement.textContent = `${website} (${index + 1})`;
                    linkItems.push(linkElement);
                });

                // Group links into pairs
                for (let i = 0; i < linkItems.length; i += 2) {
                    const item = document.createElement('li');
                    item.appendChild(linkItems[i]);

                    if (linkItems[i + 1]) {
                        item.appendChild(document.createTextNode(', '));
                        item.appendChild(linkItems[i + 1]);
                    }

                    listElement.appendChild(item);
                }
            } else {
                const item = document.createElement('li');
                item.textContent = `${website}: å†‡å–!`;
                item.style.color = '#666';
                listElement.appendChild(item);
            }
        });
    }

    // Initialize event listeners
    document.getElementById('btn').addEventListener('click', performSearch);
    document.getElementById('searchMsg').addEventListener('keypress', e => {
        if (e.key === 'Enter') performSearch();
    });

    // Cleanup on page unload
    window.addEventListener('beforeunload', () => {
        if (currentSearch) {
            currentSearch.close();
        }
    });
		
</script>
</body>
</html>
